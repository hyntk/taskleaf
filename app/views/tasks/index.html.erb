<h1><%= t('view.Task list') %></h1>

<table>
  <tr>
    <th><%=t('view.search')%></th>
    <td><%= form_with url:tasks_path,method: :get,local: true do |f| %></td>
    <td><%= f.text_field :search %></td>

    <th><%= f.label t('view.status') %></th>
    <td><%= f.select :status, [[t('view.untouched'), t('view.untouched')], [t('view.working'), t('view.working')], [t('view.completed'), t('view.completed')]],{include_blank: t('view.select box')} %></td>

    <th><%= f.label t('view.label') %></th>
    <td><%= f.select("lavel_id", Lavel.pluck(:name, :id), { include_blank: t('view.select box') }) %></td>

    <td><%= f.submit 'Search'%> <%= link_to 'Clear', tasks_path %></td>
  <% end %>
</table>

<table>
  <tr>
    <th><%= t('view.content') %></th>
    <th><%= t('view.status') %></th>
    <th><%= t('view.priority') %></th>
    <th><%= t('view.deadline') %></th>
    <th>投稿ユーザー</th>

  </tr>

<% @tasks.each do |task| %>
  <tr>
    <td><%= task.content %></td>
    <td><%= task.status %></td>
    <td><%= task.priority_i18n %></td>
    <td><%= task.deadline %></td>
    <td><%= task.user.name %></td>

    <td><%= link_to t('view.show'), task_path(task.id) %></td>
    <td><%= link_to t('view.edit'), edit_task_path(task.id) %></td>
    <td><%= link_to t('view.delete'), task_path(task.id), method: :delete %></td>
  </tr>
<% end %>
</table>

<%= link_to t('view.new'), new_task_path %>
<%= link_to t('view.sort by deadline'), tasks_path(sort_expired_deadline: "true") %>
<%= link_to t('view.sort by priority'), tasks_path(sort_expired_priority: "true") %>

<%= paginate @tasks %>